import{d as r,t as a,l as o,m as e,c as i,n as l,q as s,s as n,v as t,x as d,g as u,y as c,z as g,A as v,B as f,I as h,C as m}from"./index.719c5909.js";var[S,p]=c("image"),y=m(r({name:S,props:{src:String,alt:String,fit:String,round:Boolean,width:[Number,String],height:[Number,String],radius:[Number,String],lazyLoad:Boolean,iconSize:[Number,String],showError:a,iconPrefix:String,showLoading:a,errorIcon:{type:String,default:"photo-fail"},loadingIcon:{type:String,default:"photo"}},emits:["load","error"],setup(r,{emit:a,slots:c}){var m=o(!1),S=o(!0),y=o(),{$Lazyload:z}=e().proxy,w=i((()=>{var a={};return l(r.width)&&(a.width=s(r.width)),l(r.height)&&(a.height=s(r.height)),l(r.radius)&&(a.overflow="hidden",a.borderRadius=s(r.radius)),a}));n((()=>r.src),(()=>{m.value=!1,S.value=!0}));var x=r=>{S.value=!1,a("load",r)},b=r=>{m.value=!0,S.value=!1,a("error",r)},I=()=>{if(!m.value&&r.src){var a={alt:r.alt,class:p("img"),style:{objectFit:r.fit}};return r.lazyLoad?g(u("img",f({ref:y},a),null),[[v("lazy"),r.src]]):u("img",f({src:r.src,onLoad:x,onError:b},a),null)}},L=({el:r})=>{r===y.value&&S.value&&x()},P=({el:r})=>{r!==y.value||m.value||b()};return z&&t&&(z.$on("loaded",L),z.$on("error",P),d((()=>{z.$off("loaded",L),z.$off("error",P)}))),()=>u("div",{class:p({round:r.round}),style:w.value},[I(),S.value&&r.showLoading?u("div",{class:p("loading")},[c.loading?c.loading():u(h,{size:r.iconSize,name:r.loadingIcon,class:p("loading-icon"),classPrefix:r.iconPrefix},null)]):m.value&&r.showError?u("div",{class:p("error")},[c.error?c.error():u(h,{size:r.iconSize,name:r.errorIcon,class:p("error-icon"),classPrefix:r.iconPrefix},null)]):void 0,null==c.default?void 0:c.default()])}}));export{y as I};
