let a=document.createElement("style");a.innerHTML=".Bills .tableHeader .van-col{padding:1.33333vw 0;font-size:3.73333vw}.Bills .van-row{padding:1.33333vw 2.66667vw}.Bills .billList .van-row:nth-child(2n){background-color:#f2f3f5}.Bills .billList .van-row .van-col{line-height:2;font-size:3.2vw}.Bills .billList .van-row .van-col.time{font-size:3.2vw}.Bills .billList .van-row .van-col.price.in{color:#2ed573}.Bills .billList .van-row .van-col.price.out{color:#ff4757}",document.head.appendChild(a);import{d as e,t as l,ad as t,g as s,ai as i,y as n,C as o,D as r,aX as d,l as u,ar as c,c as f,aY as v,s as m,aw as p,G as g,N as b,B as h,L as y,a2 as _,aa as B,z as x,as as w,r as L,aZ as k,e as M,o as V,f as j,j as C,Q as H,R as T,h as A,F as S,P as z}from"./index.719c5909.js";import{T as P}from"./index.51507c56.js";import{R as U,C as E}from"./index.208a711d.js";import{L as N}from"./index.697a0a58.js";import{S as R}from"./index.66949d4d.js";import{P as D}from"./index.33604279.js";import"./use-tab-status.4fba9145.js";import"./style.712d8f68.js";var[$,F]=n("collapse"),G=Symbol($),O=o(e({name:$,props:{border:l,accordion:Boolean,modelValue:{type:[String,Number,Array],default:""}},emits:["change","update:modelValue"],setup(a,{emit:e,slots:l}){var{linkChildren:n}=t(G),o=a=>{e("change",a),e("update:modelValue",a)};return n({toggle:(e,l)=>{var{accordion:t,modelValue:s}=a;o(t?e===s?"":e:l?s.concat(e):s.filter((a=>a!==e)))},isExpanded:e=>{var{accordion:l,modelValue:t}=a;return l?t===e:t.includes(e)}}),()=>s("div",{class:[F(),{[i]:a.border}]},[null==l.default?void 0:l.default()])}})),[Q,X]=n("collapse-item"),Y=["icon","title","value","label","right-icon"],Z=o(e({name:Q,props:r({},d,{name:[Number,String],isLink:l,disabled:Boolean,readonly:Boolean}),setup(a,{slots:e}){var l=u(),t=u(),{parent:i,index:n}=c(G);if(i){var o=f((()=>{var e;return null!=(e=a.name)?e:n.value})),r=f((()=>i.isExpanded(o.value))),L=u(r.value),k=v(L),M=()=>{r.value?l.value.style.height="":L.value=!1};m(r,((a,e)=>{null!==e&&(a&&(L.value=!0),(a?_:B)((()=>{if(t.value&&l.value){var{offsetHeight:e}=t.value;if(e){var s=e+"px";l.value.style.height=a?"0":s,p((()=>{l.value.style.height=a?s:"0"}))}else M()}})))}));var V=(a=!r.value)=>{i.toggle(o.value,a)},j=()=>{a.disabled||a.readonly||V()},C=()=>{var{border:l,disabled:t,readonly:i}=a,n=y(a,Object.keys(d));return i&&(n.isLink=!1),(t||i)&&(n.clickable=!1),s(b,h({role:"button",class:X("title",{disabled:t,expanded:r.value,borderless:!l}),"aria-expanded":String(r.value),onClick:j},n),y(e,Y))},H=k((()=>x(s("div",{ref:l,class:X("wrapper"),onTransitionend:M},[s("div",{ref:t,class:X("content")},[null==e.default?void 0:e.default()])]),[[w,L.value]])));return g({toggle:V}),()=>s("div",{class:[X({border:n.value&&a.border})]},[C(),H()])}}})),q=e({name:"bills-page",components:{[P.name]:P,[U.name]:U,[E.name]:E,[N.name]:N,[b.name]:b,[R.name]:R,[O.name]:O,[Z.name]:Z,[D.name]:D},setup(){const a=L({statistic:{sum:0,expensive:0,income:0},collapseActive:0}),{listManager:e}=k.factor().buildList();return{getBills:async function(l=!1){const t=await k.factor().getBills(l,e);t.code||(a.statistic=t.data.statistics)},data:a,listManager:e,getPriceColor:function(a){return a>0?"in":"out"},getBillType:k.getBillType}}});const I=H("帐变"),J=H("时间"),K=H("金额"),W=H("类型");q.render=function(a,e,l,t,i,n){const o=M("Header"),r=M("van-tag"),d=M("van-cell"),u=M("van-collapse-item"),c=M("van-collapse"),f=M("van-col"),v=M("van-row"),m=M("van-sticky"),p=M("van-list"),g=M("van-pull-refresh"),b=M("Layout");return V(),j(b,{class:"Bills",header:""},{default:C((()=>[s(o,{class:"van-hairline--bottom",fixed:"",animation:"",onClickLeft:e[1]||(e[1]=e=>a.$router.back())},{default:C((()=>[I])),_:1}),a.data.statistic?(V(),j(c,{key:0,modelValue:a.data.collapseActive,"onUpdate:modelValue":e[2]||(e[2]=e=>a.data.collapseActive=e),accordion:""},{default:C((()=>[s(u,{title:"总收益",name:"0","is-link":!1},{value:C((()=>[s(r,null,{default:C((()=>[H(T(a.data.statistic.sum),1)])),_:1})])),default:C((()=>[s(d,{title:"收入"},{default:C((()=>[s(r,{color:"#2ed573"},{default:C((()=>[H(T(a.data.statistic.income),1)])),_:1})])),_:1}),s(d,{title:"支出"},{default:C((()=>[s(r,{color:"#ff4757"},{default:C((()=>[H(T(a.data.statistic.expensive),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])):A("v-if",!0),s(m,{"offset-top":"0"},{default:C((()=>[s(v,{class:"tableHeader"},{default:C((()=>[s(f,{span:"10"},{default:C((()=>[J])),_:1}),s(f,{span:"6",textc:""},{default:C((()=>[K])),_:1}),s(f,{span:"8"},{default:C((()=>[W])),_:1})])),_:1})])),_:1}),s(g,{modelValue:a.listManager.refreshing,"onUpdate:modelValue":e[5]||(e[5]=e=>a.listManager.refreshing=e),disabled:a.listManager.disabled,onRefresh:e[6]||(e[6]=e=>a.getBills(!0))},{default:C((()=>[s(p,{class:"billList",loading:a.listManager.loading,"onUpdate:loading":e[3]||(e[3]=e=>a.listManager.loading=e),error:a.listManager.error,"onUpdate:error":e[4]||(e[4]=e=>a.listManager.error=e),finished:a.listManager.finished,minH:"",onLoad:a.getBills},{default:C((()=>[(V(!0),j(S,null,z(a.listManager.list,(e=>(V(),j(v,{key:e.id,align:"center"},{default:C((()=>[s(f,{class:"time",span:"10"},{default:C((()=>[H(T(a.$root.formatDate(e.createdAt)),1)])),_:2},1024),s(f,{class:["price",a.getPriceColor(e.amount)],span:"6",textc:""},{default:C((()=>[H(T(e.amount),1)])),_:2},1032,["class"]),s(f,{span:"8"},{default:C((()=>[H(T(a.getBillType(e.type)),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["loading","error","finished","onLoad"])])),_:1},8,["modelValue","disabled"])])),_:1})};export default q;
