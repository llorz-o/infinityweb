import{d as e,t as a,l as i,$ as r,s as t,a4 as o,a5 as s,G as d,a6 as l,g as n,y as f,a2 as u,a7 as g,a1 as v,C as c}from"./index.719c5909.js";import{u as p}from"./use-tab-status.4fba9145.js";import{i as h}from"./style.712d8f68.js";var[m,x,b]=f("list"),T=c(e({name:m,props:{error:Boolean,loading:Boolean,finished:Boolean,errorText:String,loadingText:String,finishedText:String,immediateCheck:a,offset:{type:[Number,String],default:300},direction:{type:String,default:"down"}},emits:["load","update:error","update:loading"],setup(e,{emit:a,slots:f}){var c=i(!1),m=i(),T=i(),y=p(),S=r(m),k=()=>{u((()=>{if(!(c.value||e.finished||e.error||!1===(null==y?void 0:y.value))){var{offset:i,direction:r}=e,t=g(S);if(t.height&&!h(m)){var o=g(T);("up"===r?t.top-o.top<=i:o.bottom-t.bottom<=i)&&(c.value=!0,a("update:loading",!0),a("load"))}}}))},C=()=>{if(e.finished){var a=f.finished?f.finished():e.finishedText;if(a)return n("div",{class:x("finished-text")},[a])}},j=()=>{a("update:error",!1),k()},B=()=>{if(e.error){var a=f.error?f.error():e.errorText;if(a)return n("div",{class:x("error-text"),onClick:j},[a])}},w=()=>{if(c.value&&!e.finished)return n("div",{class:x("loading")},[f.loading?f.loading():n(v,{class:x("loading-icon")},{default:()=>[e.loadingText||b("loading")]})])};return t([()=>e.loading,()=>e.finished,()=>e.error],k),y&&t(y,(e=>{e&&k()})),o((()=>{c.value=e.loading})),s((()=>{e.immediateCheck&&k()})),d({check:k}),l("scroll",k,{target:S}),()=>{var a=null==f.default?void 0:f.default(),i=n("div",{ref:T,class:x("placeholder")},null);return n("div",{ref:m,role:"feed",class:x(),"aria-busy":c.value},["down"===e.direction?a:i,w(),C(),B(),"up"===e.direction?a:i])}}}));export{T as L};
