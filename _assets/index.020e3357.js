import{l as e,a8 as a,a9 as t,aa as r,a3 as l,ab as n,d as i,c as o,g as s,y as d,n as u,ac as c,s as v,a5 as p,$ as f,ad as b,r as g,ae as m,a2 as y,G as h,af as S,ag as x,ah as C,a6 as I,ai as w,t as k,q as B,aj as N,ak as T,al as R,am as z,an as j,ao as A,D as L,ap as $,aq as q,ar as W,p as F,z as M,as as D,C as H}from"./index.719c5909.js";import{T as O}from"./use-tab-status.4fba9145.js";import{S as V,u as X,a as G}from"./index.2f92aa39.js";import{S as E}from"./index.66949d4d.js";import{i as J}from"./style.712d8f68.js";var K;var[P,Q]=d("tab"),U=i({name:P,props:{dot:Boolean,type:String,color:String,title:String,badge:[Number,String],isActive:Boolean,disabled:Boolean,scrollable:Boolean,activeColor:String,renderTitle:Function,inactiveColor:String},setup(e){var a=o((()=>{var a={},{type:t,color:r,disabled:l,isActive:n,activeColor:i,inactiveColor:o}=e;r&&"card"===t&&(a.borderColor=r,l||(n?a.backgroundColor=r:a.color=r));var s=n?i:o;return s&&(a.color=s),a}));return()=>{return s("div",{role:"tab",class:[Q({active:e.isActive,disabled:e.disabled})],style:a.value,"aria-selected":e.isActive},[(t=s("span",{class:Q("text",{ellipsis:!e.scrollable})},[e.renderTitle?e.renderTitle():e.title]),e.dot||u(e.badge)&&""!==e.badge?s(c,{dot:e.dot,content:e.badge},{default:()=>[t]}):t)]);var t}}}),[Y,Z]=d("tabs"),_=i({name:Y,props:{inited:Boolean,animated:Boolean,swipeable:Boolean,lazyRender:Boolean,count:{type:Number,required:!0},duration:{type:[Number,String],required:!0},currentIndex:{type:Number,required:!0}},emits:["change"],setup(a,{emit:t,slots:r}){var l=e(),n=e=>t("change",e),i=e=>{var t=l.value;t&&t.state.active!==e&&t.swipeTo(e,{immediate:!a.inited})};return v((()=>a.currentIndex),i),p((()=>{i(a.currentIndex)})),()=>{return s("div",{class:Z("content",{animated:a.animated||a.swipeable})},[(e=null==r.default?void 0:r.default(),a.animated||a.swipeable?s(V,{ref:l,loop:!1,class:Z("track"),duration:1e3*+a.duration,touchable:a.swipeable,lazyRender:a.lazyRender,showIndicators:!1,onChange:n},{default:()=>[e]}):e)]);var e}}}),[ee,ae]=d("tabs"),te={color:String,border:Boolean,sticky:Boolean,animated:Boolean,ellipsis:k,swipeable:Boolean,scrollspy:Boolean,background:String,lazyRender:k,lineWidth:[Number,String],lineHeight:[Number,String],beforeChange:Function,titleActiveColor:String,titleInactiveColor:String,type:{type:String,default:"line"},active:{type:[Number,String],default:0},duration:{type:[Number,String],default:.3},offsetTop:{type:[Number,String],default:0},swipeThreshold:{type:[Number,String],default:5}},re=Symbol(ee),le=i({name:ee,props:te,emits:["click","change","scroll","disabled","rendered","click-tab","update:active"],setup(i,{emit:d,slots:c}){var p,k,L,$,q=e(),W=e(),F=e(),M=X(),D=f(q),[H,O]=($=e([]),a((()=>{$.value=[]})),[$,e=>a=>{$.value[e]=a}]),{children:V,linkChildren:G}=b(re),P=g({inited:!1,position:"",lineStyle:{},currentIndex:-1}),Q=o((()=>V.length>i.swipeThreshold||!i.ellipsis)),Y=o((()=>({borderColor:i.color,background:i.background}))),Z=(e,a)=>{var t;return null!=(t=e.name)?t:a},ee=o((()=>{var e=V[P.currentIndex];if(e)return Z(e,P.currentIndex)})),te=o((()=>m(i.offsetTop))),le=o((()=>i.sticky?te.value+p:0)),ne=e=>{var a=W.value,l=H.value;if(Q.value&&a&&l&&l[P.currentIndex]){var n=l[P.currentIndex].$el;!function(e,a,l){t(K);var n=0,i=e.scrollLeft,o=0===l?1:Math.round(1e3*l/16);!function t(){e.scrollLeft+=(a-i)/o,++n<o&&(K=r(t))}()}(a,n.offsetLeft-(a.offsetWidth-n.offsetWidth)/2,e?0:+i.duration)}},ie=()=>{var e=P.inited;y((()=>{var a=H.value;if(a&&a[P.currentIndex]&&"line"===i.type&&!J(q.value)){var t=a[P.currentIndex].$el,{lineWidth:r,lineHeight:l}=i,n=t.offsetLeft+t.offsetWidth/2,o={width:B(r),backgroundColor:i.color,transform:"translateX("+n+"px) translateX(-50%)"};if(e&&(o.transitionDuration=i.duration+"s"),u(l)){var s=B(l);o.height=s,o.borderRadius=s}P.lineStyle=o}}))},oe=e=>{var a=(e=>{for(var a=e<P.currentIndex?-1:1;e>=0&&e<V.length;){if(!V[e].disabled)return e;e+=a}})(e);if(u(a)){var t=V[a],r=Z(t,a),l=null!==P.currentIndex;P.currentIndex=a,r!==i.active&&(d("update:active",r),l&&d("change",r,t.title))}},se=e=>{var a=V.find(((a,t)=>Z(a,t)===e)),t=a?V.indexOf(a):0;oe(t)},de=(e=!1)=>{if(i.scrollspy){var a=V[P.currentIndex].$el;if(a&&D.value){var t=z(a,D.value)-le.value;k=!0,function(e,a,t,i){var o=l(e),s=o<a,d=0===t?1:Math.round(1e3*t/16),u=(a-o)/d;!function t(){o+=u,(s&&o>a||!s&&o<a)&&(o=a),n(e,o),s&&o<a||!s&&o>a?r(t):i&&r(i)}()}(D.value,t,e?0:+i.duration,(()=>{k=!1}))}}},ue=e=>{L=e.isFixed,d("scroll",e)},ce=()=>V.map(((e,a)=>s(U,{ref:O(a),dot:e.dot,type:i.type,badge:e.badge,title:e.title,color:i.color,style:e.titleStyle,class:e.titleClass,isActive:a===P.currentIndex,disabled:e.disabled,scrollable:Q.value,renderTitle:e.$slots.title,activeColor:i.titleActiveColor,inactiveColor:i.titleInactiveColor,onClick:t=>{((e,a,t)=>{var{title:r,disabled:l}=V[a],n=Z(V[a],a);d("click-tab",{name:n,title:r,event:t,disabled:l}),l?d("disabled",n,r):(N({interceptor:i.beforeChange,args:[n],done:()=>{oe(a),de()}}),d("click",n,r),T(e))})(e,a,t)}},null))),ve=()=>{var e,a,{type:t,border:r}=i;return s("div",{ref:F,class:[ae("wrap",{scrollable:Q.value}),{[w]:"line"===t&&r}]},[s("div",{ref:W,role:"tablist",class:ae("nav",[t,{complete:Q.value}]),style:Y.value},[null==(e=c["nav-left"])?void 0:e.call(c),ce(),"line"===t&&s("div",{class:ae("line"),style:P.lineStyle},null),null==(a=c["nav-right"])?void 0:a.call(c)])])};v([()=>i.color,M.width],ie),v((()=>i.active),(e=>{e!==ee.value&&se(e)})),v((()=>V.length),(()=>{P.inited&&(se(i.active),ie(),y((()=>{ne(!0)})))})),v((()=>P.currentIndex),(()=>{ne(),ie(),L&&!i.scrollspy&&R(Math.ceil(z(q.value)-te.value))}));return h({resize:ie,scrollTo:e=>{y((()=>{se(e),de(!0)}))}}),S(ie),x(ie),C((()=>{se(i.active),y((()=>{P.inited=!0,p=j(F.value),ne(!0)}))})),I("scroll",(()=>{if(i.scrollspy&&!k){var e=(()=>{for(var e=0;e<V.length;e++)if(A(V[e].$el)>le.value)return 0===e?0:e-1;return V.length-1})();oe(e)}}),{target:D}),G({props:i,setLine:ie,onRendered:(e,a)=>d("rendered",e,a),currentName:ee,scrollIntoView:ne}),()=>{var e,a;return s("div",{ref:q,class:ae([i.type])},[i.sticky?s(E,{container:q.value,offsetTop:te.value,onScroll:ue},{default:()=>[ve(),null==(e=c["nav-bottom"])?void 0:e.call(c)]}):[ve(),null==(a=c["nav-bottom"])?void 0:a.call(c)],s(_,{count:V.length,inited:P.inited,animated:i.animated,duration:i.duration,swipeable:i.swipeable,lazyRender:i.lazyRender,currentIndex:P.currentIndex,onChange:oe},{default:()=>[null==c.default?void 0:c.default()]})])}}}),[ne,ie]=d("tab"),oe=H(i({name:ne,props:L({},$,{dot:Boolean,name:[Number,String],badge:[Number,String],title:String,disabled:Boolean,titleClass:q,titleStyle:[String,Object]}),setup(a,{slots:t}){var r=e(!1),{parent:l,index:n}=W(re);if(l){var i=()=>{var e;return null!=(e=a.name)?e:n.value},d=o((()=>{var e=i()===l.currentName.value;return e&&!r.value&&(r.value=!0,l.props.lazyRender&&y((()=>{l.onRendered(i(),a.title)}))),e}));return v((()=>a.title),(()=>{l.setLine(),l.scrollIntoView()})),F(O,d),()=>{var{animated:e,swipeable:a,scrollspy:n,lazyRender:i}=l.props;if(t.default||e){var o=n||d.value;if(e||a)return s(G,{role:"tabpanel","aria-hidden":!d.value,class:ie("pane-wrapper",{inactive:!d.value})},{default:()=>[s("div",{class:ie("pane")},[null==t.default?void 0:t.default()])]});var u=r.value||n||!i?null==t.default?void 0:t.default():null;return M(s("div",{role:"tabpanel",class:ie("pane")},[u]),[[D,o]])}}}}})),se=H(le);export{se as T,oe as a};
