import{v as e,at as t,x as a,ah as i,d as o,l as s,$ as r,r as n,c as f,ae as l,D as d,au as u,s as v,a6 as h,g as p,y as m,a7 as x,a3 as c,C as g}from"./index.719c5909.js";import{i as b}from"./style.712d8f68.js";var[w,y]=m("sticky"),S=g(o({name:w,props:{zIndex:[Number,String],container:Object,offsetTop:{type:[Number,String],default:0},offsetBottom:{type:[Number,String],default:0},position:{type:String,default:"top"}},emits:["scroll","change"],setup(o,{emit:m,slots:g}){var w=s(),S=r(w),I=n({fixed:!1,width:0,height:0,transform:0}),j=f((()=>l("top"===o.position?o.offsetTop:o.offsetBottom))),N=f((()=>{var{fixed:e,height:t,width:a}=I;if(e)return{width:a+"px",height:t+"px"}})),O=f((()=>{if(I.fixed){var e=d(u(o.zIndex),{width:I.width+"px",height:I.height+"px",[o.position]:j.value+"px"});return I.transform&&(e.transform="translate3d(0, "+I.transform+"px, 0)"),e}})),T=()=>{if(w.value&&!b(w)){var{container:e,position:t}=o,a=x(w),i=c(window);if(I.width=a.width,I.height=a.height,"top"===t)if(e){var s=x(e),r=s.bottom-j.value-I.height;I.fixed=j.value>a.top&&s.bottom>0,I.transform=r<0?r:0}else I.fixed=j.value>a.top;else{var{clientHeight:n}=document.documentElement;if(e){var f=x(e),l=n-f.top-j.value-I.height;I.fixed=n-j.value<a.bottom&&n>f.top,I.transform=l<0?-l:0}else I.fixed=n-j.value<a.bottom}(e=>{m("scroll",{scrollTop:e,isFixed:I.fixed})})(i)}};return v((()=>I.fixed),(e=>m("change",e))),h("scroll",T,{target:S}),function(o,s){if(e&&window.IntersectionObserver){var r=new IntersectionObserver((e=>{s(e[0].intersectionRatio>0)}),{root:document.body}),n=()=>{o.value&&r.unobserve(o.value)};t(n),a(n),i((()=>{o.value&&r.observe(o.value)}))}}(w,T),()=>p("div",{ref:w,style:N.value},[p("div",{class:y({fixed:I.fixed}),style:O.value},[null==g.default?void 0:g.default()])])}}));export{S};
