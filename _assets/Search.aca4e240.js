let e=document.createElement("style");e.innerHTML='.Search{height:100%;width:100vw}.Search .searchPanel .history{padding:1.33333vw 2.66667vw}.Search .searchPanel .history .header{display:flex;align-items:center}.Search .searchPanel .history .header .title{flex:1;color:#646566;font-size:3.46667vw}.Search .searchPanel .history .header .delBtn{padding:1.33333vw 2.66667vw}.Search .searchPanel .history .header .delBtn .van-icon-delete{color:#646566}.Search .searchPanel .history .collection{display:flex;flex-wrap:wrap}.Search .searchPanel .history .collection .item{width:50%;padding:1.33333vw 0 1.33333vw 2.66667vw;position:relative}.Search .searchPanel .history .collection .item:nth-child(2n)::before{position:absolute;content:"";display:block;width:1px;background-color:#969799;left:0;top:20%;bottom:20%}.Search .contents{padding:1.33333vw 0}.Search .contents .contentItem{padding:1.33333vw 2.66667vw}.Search .contents .contentItem .title{font-size:3.73333vw;color:#323233}.Search .contents .contentItem .info{font-size:3.2vw;color:#969799}.Search .contents .contentItem .mark{margin-left:1.33333vw}.Search .contents .contentItem i{color:#ff4757}',document.head.appendChild(e);import{d as t,aC as a,i as s,H as n,X as o,r as i,aD as r,aE as c,O as l,T as h,s as d,aF as m,aG as y,e as v,o as u,f,h as p,g as w,F as g,P as x,j as S,R as k,Q as H}from"./index.719c5909.js";import{S as M}from"./index.00b9cfd8.js";import{R as P,C as L}from"./index.208a711d.js";var T=t({name:"search-page",components:{[a.name]:a,[M.name]:M,[P.name]:P,[L.name]:L},setup(){let e=null;const t=s(n);if(o(t))return;const a=i({history:[]}),v=r(c.SearchHistory);a.history=v||[];const{listManager:u,resetListManager:f}=l.factor().buildList(),p=async()=>{const s=t.text.trim();if(!s)return m.fail({position:"bottom",message:"请输入内容"});e=new RegExp(s);(await l.factor().searchContents(s,!0,u)).code||a.history&&(a.history=a.history.filter((e=>e!=s)),a.history.unshift(s),a.history.length>20&&a.history.splice(15),y(c.SearchHistory,a.history))};t.search=p;const{text:w}=h(t);d(w,(e=>{""===e&&f()}));return{dt:a,search:p,listManager:u,searchByHistory:e=>{t.text=e,p()},matchText:a=>null!=e&&t.text?a.replace(e,`<i>${t.text}</i>`):a,homeLayoutHeaderProvideData:t}}});const b={class:"Search"},C={key:0,class:"searchPanel"},I={class:"history van-hairline--bottom"},B={class:"header"},$=w("div",{class:"title"},"搜索历史",-1),_={class:"delBtn"},j={class:"collection"},z={key:1,class:"contents"};T.render=function(e,t,a,s,n,o){const i=v("van-icon"),r=v("van-col"),c=v("van-row"),l=v("Empty");return u(),f("div",b,[0===e.listManager.list.length&&e.homeLayoutHeaderProvideData.isFocus?(u(),f("div",C,[p(" 历史搜索 "),w("div",I,[w("div",B,[$,w("div",_,[w(i,{name:"delete",size:"15"})])]),w("div",j,[(u(!0),f(g,null,x(e.dt.history,((t,a)=>(u(),f(g,{key:a},[a<=9?(u(),f("div",{key:0,class:"item",onMousedown:a=>e.searchByHistory(t)},k(t),41,["onMousedown"])):p("v-if",!0)],64)))),128))])]),p(" 热门搜索 & 推荐搜索")])):(u(),f("div",z,[w(l,{show:0==e.listManager.list.length,description:`未搜索到${e.homeLayoutHeaderProvideData.text}相关内容`},{default:S((()=>[(u(!0),f(g,null,x(e.listManager.list,(t=>(u(),f("div",{key:t.content.id,class:"contentItem",onClick:a=>e.$router.push(`/content/${t.content.id}`)},[w("div",{class:"title",innerHTML:e.matchText(t.content.title)},null,8,["innerHTML"]),w(c,{class:"info",gutter:"5"},{default:S((()=>[w(r,{class:"authorName"},{default:S((()=>[H(k(t.user.nickname),1)])),_:2},1024),0!=t.content.comments?(u(),f(r,{key:0,class:"msgCounte"},{default:S((()=>[H(k(t.content.comments)+"评论",1)])),_:2},1024)):p("v-if",!0),w(r,{class:"time"},{default:S((()=>[H(k(e.$root.formatLocalTime(t.content.createdAt)),1)])),_:2},1024),(u(!0),f(g,null,x(t.marks,((t,a)=>(u(),f("div",{class:"mark",key:a,innerHTML:"#"+e.matchText(t)},null,8,["innerHTML"])))),128))])),_:2},1024)],8,["onClick"])))),128))])),_:1},8,["show","description"])]))])};export default T;
